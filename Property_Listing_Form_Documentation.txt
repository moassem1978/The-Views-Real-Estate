
PROPERTY LISTING FORM DOCUMENTATION
The Views Real Estate Platform
===================================

FORM OVERVIEW
=============
The property listing form is a comprehensive two-column layout designed for creating and editing real estate properties in the Egyptian market. The form supports both primary (new development) and resale properties with specialized fields for different property types.

Key Features:
• Dual-mode operation: Create new properties or edit existing ones
• Advanced image management with preview, replace, and delete capabilities
• Dynamic field visibility based on property type and listing type
• Real-time validation and error handling
• Responsive design supporting mobile and desktop interfaces

FORM FIELDS - LEFT COLUMN (Basic Information)
=============================================

1. Title* (Required)
   Type: Text Input
   Description: Property title for listings

2. Description* (Required)
   Type: Textarea (120px minimum height)
   Description: Detailed property description

3. City* (Required)
   Type: Select Dropdown
   Options: Cairo, Zayed/6th October, North Coast, Red Sea, Dubai, London, Other

4. Country (Optional)
   Type: Select Dropdown
   Options: Egypt (default), UAE, UK, Other

5. Project Name* (Required)
   Type: Text Input
   Description: Name of the development project

6. Developer Name (Optional)
   Type: Text Input
   Description: Company developing the project

7. Property Type* (Required)
   Type: Select Dropdown
   Options: Apartment, Penthouse, Villa, Twinhouse, Townhouse, Chalet, Office

8. Listing Type* (Required)
   Type: Select Dropdown
   Options: Primary (new development), Resale (existing property)

9. Bedrooms* (Required)
   Type: Number Input
   Description: Number of bedrooms

10. Bathrooms* (Required)
    Type: Number Input
    Description: Number of bathrooms

FORM FIELDS - RIGHT COLUMN (Pricing & Details)
===============================================

1. Price (L.E)* (Required)
   Type: Number Input
   Description: Property price in Egyptian Pounds

2. Built-up Area (m²)* (Required)
   Type: Number Input
   Description: Interior living space in square meters

3. Down Payment (L.E) (Optional)
   Type: Number Input
   Description: Initial payment required (for primary listings)

4. Installment Period (months) (Optional)
   Type: Number Input
   Description: Payment plan duration (for primary listings)

5. Plot Size (m²) (Optional)
   Type: Number Input
   Description: Total land area (for villas and townhouses)

6. Garden Size (m²) (Optional)
   Type: Number Input
   Description: Garden area (for ground floor units)

7. Floor Number (Optional)
   Type: Number Input
   Description: Floor level (for apartments)

PROPERTY FLAGS AND FEATURES
============================

Boolean Switches (Toggle On/Off):

1. Featured Property
   Description: Show on homepage
   
2. New Listing
   Description: Mark as newly added
   
3. Highlighted
   Description: Priority in listings
   
4. Ground Unit
   Description: Has garden access
   
5. Full Cash
   Description: No installments available

Flag Usage Guidelines:
• Featured Property: Limited to key properties for homepage display
• New Listing: Automatically set for new properties, manually controllable
• Highlighted: Gives priority sorting in search results
• Ground Unit: Important for properties with garden access
• Full Cash: Indicates no financing options available

IMAGE MANAGEMENT SYSTEM
========================

Advanced Image Upload and Management Features:

1. Image Upload
   Description: Drag & drop or click to upload multiple images
   Limitations: Maximum 10 images, 25MB each

2. Image Preview
   Description: Click any image to view in full-screen modal
   Features: Navigation between all images

3. Image Replacement
   Description: Replace existing images without losing order
   Limitations: One-to-one replacement only

4. Image Deletion
   Description: Mark images for deletion with undo option
   Note: Changes applied on form submission

5. Change Tracking
   Description: Visual indicators for pending changes
   Features: Summary of all pending operations

Image Processing Rules:
• Images are processed sequentially: deletions, replacements, then additions
• All images are validated for format and size before upload
• Image paths are automatically normalized for consistency
• Failed uploads are reported with specific error messages
• Changes are transactional - all succeed or all fail

FORM VALIDATION RULES
======================

Field Validation Rules:

Title: Required, non-empty string
Description: Required, minimum content expected
City: Must select from predefined list
Property Type: Required, normalized to lowercase
Price: Required, positive number
Built-up Area: Required, positive number
Bedrooms/Bathrooms: Required, positive integers
Payment Fields: Optional, positive numbers if provided

Special Validation Logic:
• Property Type Normalization: All property types are converted to lowercase and validated against a whitelist
• State Auto-Population: State field is automatically populated to match city if not explicitly set
• Address Fallback: Project name is used as address if no address is provided
• Placeholder Handling: "none" values are converted to empty strings during submission
• Default Values: Listing type defaults to "Primary" if not specified

FORM SUBMISSION PROCESS
=======================

Multi-Step Submission Process:

1. Data Validation: All form fields are validated against business rules
2. Property Creation/Update: Core property data is saved to database
3. Image Processing: Images are uploaded and processed in order:
   • Existing images marked for deletion are removed
   • Existing images marked for replacement are updated
   • New images are uploaded and added to the property
4. Final Update: Property record is updated with final image list
5. Cache Invalidation: Related queries are invalidated and refetched
6. Success Notification: User receives confirmation and form closes

Error Recovery:
• Form submission errors are reported with specific messages
• Image upload failures don't prevent property saving
• Partial failures are rolled back to maintain data integrity
• Users can retry operations without losing form data
• Loading states prevent duplicate submissions

TECHNICAL IMPLEMENTATION
=========================

Components and Technologies:

Form Framework: React Hook Form with Zod validation
Purpose: Type-safe form handling and validation

UI Components: Shadcn/UI with Tailwind CSS
Purpose: Consistent, accessible interface components

Data Management: TanStack Query (React Query)
Purpose: Server state management and caching

Image Upload: FormData with fetch API
Purpose: Direct file upload to server endpoints

Notifications: Custom toast system
Purpose: User feedback for operations

USAGE GUIDELINES
================

Best Practices for Users:
• Required Fields: Complete all fields marked with red asterisks (*) before submission
• Image Quality: Use high-resolution images (minimum 800x600) for best presentation
• Property Types: Select the most specific property type available for accurate categorization
• Pricing Information: Include payment terms for primary listings to help buyers understand financing options
• Descriptions: Write detailed descriptions focusing on unique selling points and amenities
• Location Data: Ensure city and project name are accurate for mapping and search functionality

Troubleshooting:
• Form Won't Submit: Check for validation errors highlighted in red
• Image Upload Issues: Verify file sizes are under 25MB and formats are supported
• Missing Fields: Scroll through entire form to ensure all required fields are completed
• Save Button Disabled: Wait for any ongoing uploads or validations to complete
• Data Loss: Form data is preserved during validation errors - no need to re-enter

===================================
End of Documentation
Generated: June 2025
The Views Real Estate Platform
